(this.webpackJsonpcats=this.webpackJsonpcats||[]).push([[0],{83:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(20),i=n.n(r),o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,93)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))},s=(n(58),n(21)),j=n(8),d=n(7),b=n(31),u=n(18),l=n(26),O=n(2),h=n(91),m=n(92),x=Object(m.a)((function(){return Object(h.a)({noCatsCol:{marginBottom:20}})})),f=n(19),g=n(24),p=Object(m.a)((function(){return Object(h.a)({card:{marginBottom:20},cardBody:{padding:20},button:{width:"100%"}})})),v=n(1),w=function(e){var t=e.catId,n=e.imageUrl,c=p();return Object(v.jsxs)(f.a,{className:c.card,children:[Object(v.jsx)(f.a.Img,{variant:"top",src:n}),Object(v.jsx)(f.a.Body,{className:c.cardBody,children:Object(v.jsx)(s.b,{to:"/".concat(t),children:Object(v.jsx)(g.a,{className:c.button,children:"View Details"})})})]})},S=function(e){var t=e.cats,n=x();return t.length?Object(v.jsx)(v.Fragment,{children:t.map((function(e){return Object(v.jsx)(u.a,{md:3,sm:6,xs:12,children:Object(v.jsx)(w,Object(O.a)({},e))},e.catId)}))}):Object(v.jsx)(u.a,{className:n.noCatsCol,xs:12,children:"No cats available"})},C=a.a.memo(S),B=n(4),I=n(32),k=function(){return new URLSearchParams(Object(j.f)().search)},y=Object(m.a)((function(){return Object(h.a)({formGroup:{marginBottom:"1rem"}})})),N=function(e){var t=e.breeds,n=e.onSelectBreed,a=k(),r=y(),i=Object(c.useCallback)((function(e){return n(e.target.value)}),[n]);return Object(v.jsxs)(I.a.Group,{className:r.formGroup,onChange:i,children:[Object(v.jsx)(I.a.Label,{children:"Breed"}),Object(v.jsxs)(I.a.Select,{defaultValue:a.get("breed")||"",children:[Object(v.jsx)("option",{children:"Select breed"}),t.map((function(e){return Object(v.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]})},L=a.a.memo(N),E=["loading","error"],M=function(e){var t=e.loading,n=e.error,c=Object(B.a)(e,E);return t?Object(v.jsx)("h2",{children:"Loading..."}):n||!c.breeds.length?Object(v.jsx)(l.a,{variant:"warning",children:"Sorry. Can't fetch breed list right now, Meow! \ud83d\ude3f"}):Object(v.jsx)(L,Object(O.a)({},c))},A=function(e){var t=e.onClick,n=e.loading,c=e.disabled;return Object(v.jsx)(g.a,{disabled:c||n,variant:"success",onClick:t,children:n?"Loading cats...":"Load more"})},F=n(53),P=Object(m.a)((function(){return Object(h.a)({container:{padding:"0px 15px","@media (min-width: 576px)":{maxWidth:"540px"},"@media (min-width: 768px)":{maxWidth:"720px"},"@media (min-width: 992px)":{maxWidth:"960px"},"@media (min-width: 1200px)":{maxWidth:"1140px"}}})})),U=function(e){var t=e.children,n=P();return Object(v.jsx)(F.a,{className:n.container,children:t})},W=n(25),D=n.n(W),G={catApi:"https://api.thecatapi.com/v1"},T=function(){var e=Object(c.useState)(!0),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),i=Object(d.a)(r,2),o=i[0],s=i[1],j=Object(c.useState)([]),b=Object(d.a)(j,2),u=b[0],l=b[1],O=Object(c.useCallback)((function(){D.a.get("".concat(G.catApi,"/breeds")).then((function(e){var t=e.data.map((function(e){return{id:e.id,name:e.name}}));l(t)})).catch((function(e){return s(e)})).finally((function(){return a(!1)}))}),[]);return Object(c.useEffect)((function(){return O()}),[O]),{loading:n,error:o,response:u}},J=n(37),R=function(e){var t=Object(c.useRef)();return Object(c.useEffect)((function(){t.current=e}),[e]),t.current},V=function(e){var t=Object(c.useState)(!1),n=Object(d.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(!1),o=Object(d.a)(i,2),s=o[0],j=o[1],b=Object(c.useState)(""),u=Object(d.a)(b,2),l=u[0],O=u[1],h=Object(c.useState)([]),m=Object(d.a)(h,2),x=m[0],f=m[1],g=Object(c.useState)(1),p=Object(d.a)(g,2),v=p[0],w=p[1],S=R(e),C=Object(c.useMemo)((function(){return S!==e}),[S,e]),B=Object(c.useCallback)((function(){r(!0),C&&(j(!1),f([])),D.a.get("".concat(G.catApi,"/images/search?page=").concat(v,"&limit=10&breed_id=").concat(e)).then((function(e){var t=e.data.map((function(e){return{catId:e.id,imageUrl:e.url}})),n=(C?t:[].concat(Object(J.a)(x),Object(J.a)(t))).filter((function(e,t,n){return n.findIndex((function(t){return t.catId===e.catId}))===t}));x.length!==n.length||C||j(!0),f(n)})).catch((function(e){return O(e)})).finally((function(){w(v+1),r(!1)}))}),[e,v,C,x]);return Object(c.useEffect)((function(){e&&C&&B()}),[e,B,C]),{loading:a,error:l,response:x,loadMore:B,isEndOfPage:s}},H=Object(m.a)((function(){return Object(h.a)({select:{padding:"10px 0px"}})})),_=function(){var e=k(),t=Object(c.useState)(e.get("breed")),n=Object(d.a)(t,2),a=n[0],r=n[1],i=H(),o=T(),s=o.loading,j=o.error,O=o.response,h=V(a),m=h.loading,x=h.error,f=h.response,g=h.loadMore,p=h.isEndOfPage,w=Object(c.useCallback)((function(e){return r(e)}),[]);return Object(v.jsxs)(U,{children:[Object(v.jsx)("h1",{children:"Cat Browser"}),Object(v.jsx)(b.a,{className:i.select,children:Object(v.jsx)(u.a,{md:3,sm:6,xs:12,children:Object(v.jsx)(M,{loading:s,error:!!j,breeds:O,onSelectBreed:w})})}),Object(v.jsx)(b.a,{children:x?Object(v.jsx)(u.a,{md:3,sm:6,xs:12,children:Object(v.jsx)(l.a,{variant:"warning",children:"Apologies but we could not load new cats for you at this time! Meow! \ud83d\udc31"})}):Object(v.jsx)(C,{cats:f})}),!p&&Object(v.jsx)(b.a,{children:Object(v.jsx)(u.a,{md:3,sm:6,xs:12,children:Object(v.jsx)(A,{onClick:g,loading:m,disabled:!f.length})})})]})},q=Object(m.a)((function(){return Object(h.a)({header:{padding:16}})})),z=function(e){var t=e.id,n=e.name,c=e.origin,a=e.temperament,r=e.description,i=e.imageUrl,o=q();return Object(v.jsxs)(f.a,{children:[Object(v.jsx)(f.a.Header,{className:o.header,children:Object(v.jsx)(s.b,{to:{pathname:"/",search:"?breed=".concat(t)},children:Object(v.jsx)(g.a,{children:"Back"})})}),Object(v.jsx)(f.a.Img,{src:i}),Object(v.jsxs)(f.a.Body,{children:[Object(v.jsx)("h4",{children:n}),Object(v.jsx)("h5",{children:"Origin: ".concat(c)}),Object(v.jsx)("h6",{children:a}),Object(v.jsx)("p",{children:r})]})]})},K=function(e){var t=Object(c.useState)(!0),n=Object(d.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(""),o=Object(d.a)(i,2),s=o[0],j=o[1],b=Object(c.useState)(),u=Object(d.a)(b,2),l=u[0],O=u[1],h=Object(c.useCallback)((function(){D.a.get("".concat(G.catApi,"/images").concat(e)).then((function(t){var n=Object(d.a)(t.data.breeds,1)[0],c={catId:e,id:n.id,description:n.description,imageUrl:t.data.url,name:n.name,origin:n.origin,temperament:n.temperament};O(c)})).catch((function(e){return j(e)})).finally((function(){return r(!1)}))}),[e]);return Object(c.useEffect)((function(){return h()}),[h]),{loading:a,error:s,response:l}},Q=function(){var e=K(window.location.pathname),t=e.loading,n=e.error,c=e.response;return n?Object(v.jsx)(U,{children:Object(v.jsx)(l.a,{variant:"warning",children:"I can't fetch cat details right now. Damn, it hurts right here in my meow meow \ud83d\ude3f"})}):Object(v.jsx)(U,{children:t||!c?Object(v.jsx)("h5",{children:"Loading..."}):Object(v.jsx)(z,Object(O.a)({},c))})},X=Object(m.a)((function(){return Object(h.a)({root:{paddingTop:20,paddingBottom:20}})})),Y=function(){var e=X();return Object(v.jsx)("div",{className:e.root,children:Object(v.jsx)(s.a,{children:Object(v.jsxs)(j.c,{children:[Object(v.jsx)(j.a,{exact:!0,path:"/",render:function(){return Object(v.jsx)(_,{})}}),Object(v.jsx)(j.a,{path:"/:catId",render:function(){return Object(v.jsx)(Q,{})}})]})})})};i.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(Y,{})}),document.getElementById("root")),o()}},[[83,1,2]]]);
//# sourceMappingURL=main.d11ed4a3.chunk.js.map